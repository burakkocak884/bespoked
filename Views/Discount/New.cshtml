@using profisee_project.Models

@{
    List<string> msgs = ViewBag.Messages;
    var products = ViewBag.Products;
}

@{if(msgs.Count > 0){
    <div style="width: 80rem;">
        @{foreach(string msg in msgs){
            <p style = "color: red;">@msg</p>
        }}
    </div>
}
}


<div style="width: 80rem;">
        <form style="width: 98%;" asp-controller="Discount" asp-action= "Save">
            
            <div style = "width: 98%;display: flex;">
                <select class = "product-dropdown" name="productId" style = "width: 42%;margin: 0.5%;" placeholder = "Products" required>
                            <option value="" disabled selected hidden>Products</option>

                            @{if (products != null)
                                foreach(Product product in products){
                                    string stockInfo = @product.QuantityOnHand == 0 ? "     --->> Out of Stock!!!": string.Empty;
                                    <option value = "@product.productId">@product.Name, @product.QuantityOnHand available at $ @product.SalePrice  <span id="out-of-stock-text">@stockInfo</span></option>
                                }    
                            }
                </select>
                <input style = "width: 24%;margin: 0.5%;" type="date" id="BeginDate" name="BeginDate" placeholder = "Begin Date" required><br><br>
                <input style = "width: 24%;margin: 0.5%;" type="date" id="EndDate" name="EndDate" placeholder = "End Date" ><br><br>
                <input style = "width: 20%;margin: 0.5%;" type="number" id="DiscountPercentage" name="DiscountPercentage" placeholder = "Discount Percentage" required><br><br>
            </div>
            <div style = "width: 99%;">
                <input style = "width: 98%;margin: 0.5%;" type="submit" value="Add a New Discount">
            </div>
        </form>
</div>


<style>
    .date-label{
        font-size: 30px;
    }
</style>